// Generated by CoffeeScript 1.9.1
(function() {
  var rewire_stack, spop, spush;

  spush = function() {
    var newtip, oldtip;
    oldtip = $('a.topic').first();
    if (oldtip.attr('id') === 'empty-stack') {
      oldtip.hide();
    } else {
      oldtip.removeClass('active');
    }
    newtip = $('a#ptype').clone();
    newtip.removeAttr('id');
    newtip.removeClass('hideme');
    newtip.addClass('active');
    newtip.text($('input').val());
    newtip.insertBefore(oldtip);
    $('input').val('');
    return rewire_stack();
  };

  spop = function() {
    var doomed, empty_stack, hotshot;
    doomed = $('a.topic.active').first();
    hotshot = $('a.topic').not('.active').first();
    empty_stack = hotshot.attr('id') === 'empty-stack';
    doomed.removeClass('active');
    doomed.addClass('disabled');
    if (!empty_stack) {
      hotshot.addClass('active');
      doomed.slideUp(300, function() {
        return this.remove();
      });
    }
    if (empty_stack) {
      doomed.remove();
      hotshot.fadeIn();
    }
    return rewire_stack();
  };

  rewire_stack = function() {
    $('a.topic').unbind();
    return $('a.topic').not('#ptype').not('#empty-stack').click(spop);
  };

  $(document).ready(function() {
    $('#push').click(spush);
    $('input').focus();
    $('input').select();
    $('input').keyup(function(event) {
      if (event.which === 13 && $('input').val() !== '') {
        spush();
      }
      if (event.which === 0x2e && $('input').val() === '') {
        return spop();
      }
    });
    $('a#show-full-help').click(function() {
      $('div#full-help').fadeIn();
      $('a#hide-full-help').show();
      return $('a#show-full-help').hide();
    });
    $('a#hide-full-help').click(function() {
      $('div#full-help').fadeOut();
      $('a#show-full-help').show();
      return $('a#hide-full-help').hide();
    });
    $('a#show-shortcuts').click(function() {
      $('div#shortcuts').fadeIn();
      $('a#hide-shortcuts').show();
      return $('a#show-shortcuts').hide();
    });
    $('a#hide-shortcuts').click(function() {
      $('div#shortcuts').fadeOut();
      $('a#show-shortcuts').show();
      return $('a#hide-shortcuts').hide();
    });
    return rewire_stack();
  });

}).call(this);
